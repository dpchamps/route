/*! Routejs 21-04-2014 */
!function(a){"use strict";var b=function(b){var c="/ajax",d=".html",e={"default":{name:"index",node:void 0,callback:function(){}}};this.path=b.hasOwnProperty("path")?b.path:c,this.extension=b.hasOwnProperty("extension")?b.extension:d,this.routes=b.hasOwnProperty("routes")?b.routes:e,this.stateObject={route:""},this.currentRoute={},this.historyAPIsupport=!(!a.history||!a.history.pushState),this.isHash=/^#.*/,this.captureHash=/#(.*)/,this.init()};b.prototype.init=function(){var b=this;this.historyAPIsupport?a.onpopstate=function(a){a.preventDefault(),b.routes.hasOwnProperty(b.currentRoute)?b.getPage(b.currentRoute):b.setRoute(b.routes["default"])}:a.hashchange=function(a){a.preventDefault(),b.routes.hasOwnProperty(b.currentRoute)?b.getpage(b.currentRoute):b.setRoute(b.routes["default"])}},b.prototype.setRoute=function(b){this.currentRoute=b,this.stateObject.route=this.currentRoute.name,this.historyAPIsupport?a.history.pushState(this.stateObject,this.currentRoute.name,this.currentRoute.name):a.location="#"+this.currentRoute.name},b.prototype.getPage=function(b){var c=new a.XMLHttpRequest,d=this;c.open("GET",this.path+"/"+this.currentRoute.name+this.extension),c.onreadystatechange=function(){var e="",f="";if(4==c.readyState&&200==c.status){if("undefined"==typeof b.node){var g=a.document.createElement("div");g.innerHTML=c.responseText;var h=g.childNodes[0].getAttribute("id");if(null===h)return console.error(d.currentRoute.name,"does not have a node to attach to. Redirecting to default."),void d.setRoute(d.routes["default"]);e=h,f=g.childNodes[0].innerHTML}else e=b.node,f=c.responseText;if(null===a.document.getElementById(e))return console.error("Cannot find",e,"for",d.currentRoute.name,". Redirecting to default"),void d.setRoute(d.routes["default"]);a.document.getElementById(e).innerHTML=f,d.currentRoute.callback()}},c.send()},a.Route=b}(this);